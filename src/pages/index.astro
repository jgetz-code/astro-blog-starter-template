---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

// Safely attempt to load latest posts if a 'blog' content collection exists
let posts = [];
try {
  const { getCollection } = await import('astro:content');
  posts = (await getCollection('blog'))
    .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
    .slice(0, 3);
} catch (e) {
  posts = [];
}
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead
      title="Jacob Getz — HPC Systems Administrator"
      description="I run leadership‑class supercomputers that make science possible."
    />
    <meta name="theme-color" content="#0b0f17" />
    <style>
      :root {
        --bg: #0b0f17;
        --text: #e6edf3;
        --muted: #9fb3c8;
        --card: #101725;
        --card-2: #0e1421;
        --border: #22304a;
        --accent: #58a6ff;
        --accent-2: #7aa2f7;
        --ok: #3fb950;

        /* New: high-contrast orange + outline */
        --orange: #ffa657; /* accessible orange */
        --outline: 0 1px 0 #000, 0 -1px 0 #000, 1px 0 0 #000, -1px 0 0 #000,
                    1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;
      }

      /* Dark page baseline (scoped to this page) */
      body {
        color-scheme: dark;
        background: var(--bg);
        color: var(--text);
        margin: 0;
        font-size: 1.05rem;
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      a {
        color: var(--accent);
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }

      main {
        max-width: 72rem;
        margin: 0 auto;
        padding: 2rem 1rem 4rem;
      }

      .hero {
        display: grid;
        gap: 1rem;
        padding: 2rem 0 1rem;
      }
      .hero h1 {
        margin: 0;
        font-size: clamp(2.5rem, 6vw, 4rem);
        letter-spacing: 0.2px;

        /* Make the hero name orange with a black border */
        color: var(--orange);
        text-shadow: var(--outline);
        -webkit-text-stroke: 1px #000; /* nice edge on WebKit/Chromium */
      }

      /* Apply orange + outline to other darker text for readability */
      h2, h3, .chip, .post a {
        color: var(--orange);
        text-shadow: var(--outline);
        -webkit-text-stroke: 0.1px #000;
      }

      .tagline {
        color: var(--muted);
        font-size: clamp(1.05rem, 2vw, 1.25rem);
        max-width: 60ch;
      }

      /* Center quick-action buttons in the viewport */
      .quick-actions {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
        margin-top: 0.5rem;

        /* Center on screen */
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        z-index: 50;

        /* keep the visual styling consistent with original layout */
        justify-content: center;
      }

      /* Stack buttons vertically on narrow screens for better touch targets */
      @media (max-width: 480px) {
        .quick-actions {
          flex-direction: column;
          gap: 0.5rem;
          width: calc(100% - 2rem);
          left: 50%;
          transform: translate(-50%, -50%);
        }
        .btn {
          width: 100%;
          justify-content: center;
        }
      }

      .btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.6rem 0.9rem;
        border: 1px solid var(--border);
        border-radius: 10px;
        background: var(--card);
        color: var(--text);
        transition: border-color 150ms ease, background 150ms ease;
        font-weight: 500;
      }
      .btn:hover {
        background: var(--card-2);
        border-color: var(--accent-2);
        text-decoration: none;
      }

      .at-a-glance {
        display: grid;
        grid-template-columns: repeat(6, minmax(0, 1fr));
        gap: 0.75rem;
        margin: 2rem 0 0.5rem;
        align-items: center; /* center items in each grid cell */
      }
      @media (max-width: 1024px) {
        .at-a-glance { grid-template-columns: repeat(3, minmax(0, 1fr)); }
      }
      @media (max-width: 640px) {
        .at-a-glance { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      }
      .chip {
        background: var(--card);
        border: 1px solid var(--border);
        padding: 0.5rem 0.9rem;
        border-radius: 999px;
        font-size: 0.95rem;
        text-align: center;

        /* Fix: vertically center the text inside each chip */
        display: inline-flex;
        align-items: center;
        justify-content: center;
        line-height: 1.2;
      }

      .section {
        margin-top: 2.75rem;
      }
      .section h2 {
        font-size: 1.3rem;
        margin-bottom: 0.75rem;
      }
      .cards {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 1rem;
      }
      @media (max-width: 900px) {
        .cards { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      }
      @media (max-width: 600px) {
        .cards { grid-template-columns: 1fr; }
      }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 1rem 1.1rem;
      }
      .card h3 {
        margin: 0 0 0.4rem 0;
        font-size: 1.05rem;
      }
      .card p {
        margin: 0;
        color: var(--muted);
      }

      .list {
        margin: 0.25rem 0 0;
        padding-left: 1.1rem;
        color: var(--muted);
      }
      .list li { margin: 0.25rem 0; }

      .posts {
        display: grid;
        gap: 0.75rem;
      }
      .post {
        display: grid;
        gap: 0.2rem;
        padding: 0.9rem 1rem;
        border: 1px solid var(--border);
        border-radius: 12px;
        background: var(--card);
      }
      .post a {
        font-weight: 600;
        text-decoration: none;
      }
      .post a:hover {
        color: var(--accent);
        text-decoration: underline;
      }
      .post small {
        color: var(--muted);
      }

      .cta {
        margin-top: 3rem;
        padding: 1.2rem 1.1rem;
        border: 1px dashed var(--border);
        border-radius: 12px;
        background: linear-gradient(180deg, rgba(88,166,255,0.08), transparent 60%);
      }
    </style>
  </head>
  <body>
    <Header />
    <main>
      <section class="hero">
        <h1>Jacob Getz IT Done</h1>
        <p class="tagline">
          HPC systems administrator. I run leadership‑class supercomputers that make science possible —
          keeping massive clusters healthy, fast, and dependable.
        </p>
        <div class="quick-actions">
          <!-- TODO: Replace links with your real ones -->
          <a class="btn" href="mailto:hello@jacobgetz.work">Email</a>
          <a class="btn" href="https://github.com/jgetz-code" target="_blank" rel="noopener noreferrer">GitHub</a>
          <a class="btn" href="/resume.pdf">Resume</a>
        </div>

        <div class="at-a-glance">
          <div class="chip">Linux at scale</div>
          <div class="chip">SLURM scheduling</div>
          <div class="chip">InfiniBand</div>
          <div class="chip">Lustre / BeeGFS</div>
          <div class="chip">Automation</div>
          <div class="chip">Observability</div>
        </div>
      </section>

      <section class="section">
        <h2>What I do</h2>
        <div class="cards">
          <article class="card">
            <h3>Operate at scale</h3>
            <p>From racks to results: reliable clusters that deliver for researchers and engineers.</p>
          </article>
          <article class="card">
            <h3>Performance & reliability</h3>
            <p>Throughput, uptime, and smart scheduling for real scientific workloads.</p>
          </article>
          <article class="card">
            <h3>User experience</h3>
            <p>Simple, documented pathways so people can do their best work on shared systems.</p>
          </article>
        </div>
      </section>

      <section class="section">
        <h2>Recent highlights</h2>
        <ul class="list">
          <li>Keeping a leadership‑class, mixed architecture, gpu-enabled, oil submerged, cluster humming through the AI boom with millions of jobs scheduled.</li>
          <li>Rolled out observability that turned mystery slowdowns into quick fixes.</li>
          <li>Shipped storage layouts engineered for petabyte‑scale results.</li>
        </ul>
      </section>

      {posts.length > 0 && (
        <section class="section">
          <h2>Latest writing</h2>
          <div class="posts">
            {posts.map((post) => (
              <article class="post">
                <a href={`/blog/${post.slug}/`}>{post.data.title}</a>
                <small>
                  {new Date(post.data.pubDate).toLocaleDateString(undefined, {
                    year: 'numeric',
                    month: 'short',
                    day: '2-digit'
                  })}
                </small>
                {post.data.description && <p class="tagline">{post.data.description}</p>}
              </article>
            ))}
          </div>
        </section>
      )}

      <section class="cta">
        <strong>Need your cluster to behave?</strong>
        <div>Happy to chat about scheduling, storage, and making big systems feel simple.</div>
      </section>
    </main>
    <Footer />
  </body>
</html>
