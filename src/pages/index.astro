---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

// Safely attempt to load latest posts if a 'blog' content collection exists
let posts = [];
try {
  const { getCollection } = await import('astro:content');
  posts = (await getCollection('blog'))
    .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
    .slice(0, 3);
} catch (e) {
  posts = [];
}
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead
      title="Jacob Getz — HPC Systems Administrator"
      description="I run leadership‑class supercomputers that make science possible."
    />
    <meta name="theme-color" content="#0b0f17" />
    <style>
      main {
        max-width: 72rem;
        margin: 0 auto;
        padding: 2rem 1rem 4rem;
      }
    </style>
  </head>
  <body class="dark-theme">
    <Header />
    <main>
      <section class="hero">
        <h1>Jacob Getz IT Done</h1>
        <p class="tagline">
          HPC systems administrator. I run leadership‑class supercomputers that make science possible —
          keeping massive clusters healthy, fast, and dependable.
        </p>
        <div class="quick-actions">
          <!-- TODO: Replace links with your real ones -->
          <a class="btn" href="mailto:hello@jacobgetz.work">Email</a>
          <a class="btn" href="https://github.com/jgetz-code" target="_blank" rel="noopener noreferrer">GitHub</a>
          <a class="btn" href="/resume.pdf">Resume</a>
        </div>

        <div class="at-a-glance">
          <div class="chip">Linux at scale</div>
          <div class="chip">SLURM scheduling</div>
          <div class="chip">InfiniBand</div>
          <div class="chip">Lustre / BeeGFS</div>
          <div class="chip">Automation</div>
          <div class="chip">Observability</div>
        </div>
      </section>

      <section class="section">
        <h2>What I do</h2>
        <div class="cards">
          <article class="card">
            <h3>Operate at scale</h3>
            <p>From racks to results: reliable clusters that deliver for researchers and engineers.</p>
          </article>
          <article class="card">
            <h3>Performance & reliability</h3>
            <p>Throughput, uptime, and smart scheduling for real scientific workloads.</p>
          </article>
          <article class="card">
            <h3>User experience</h3>
            <p>Simple, documented pathways so people can do their best work on shared systems.</p>
          </article>
        </div>
      </section>

      <section class="section">
        <h2>Recent highlights</h2>
        <ul class="list">
          <li>Keeping a leadership‑class, mixed architecture, gpu-enabled, oil submerged, cluster humming through the AI boom with millions of jobs scheduled.</li>
          <li>Rolled out observability that turned mystery slowdowns into quick fixes.</li>
          <li>Shipped storage layouts engineered for petabyte‑scale results.</li>
        </ul>
      </section>

      {posts.length > 0 && (
        <section class="section">
          <h2>Latest writing</h2>
          <div class="posts">
            {posts.map((post) => (
              <article class="post">
                <a href={`/blog/${post.slug}/`}>{post.data.title}</a>
                <small>
                  {new Date(post.data.pubDate).toLocaleDateString(undefined, {
                    year: 'numeric',
                    month: 'short',
                    day: '2-digit'
                  })}
                </small>
                {post.data.description && <p class="tagline">{post.data.description}</p>}
              </article>
            ))}
          </div>
        </section>
      )}

      <section class="cta">
        <strong>Need your cluster to behave?</strong>
        <div>Happy to chat about scheduling, storage, and making big systems feel simple.</div>
      </section>
    </main>
    <Footer />
  </body>
</html>
